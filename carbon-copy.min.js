(function(){const p='c-c-',cg=p+'get-',cgp=cg+'props-',hs=p+'href-stamp',sh='stamp-href',os=p+'orig-style';class CC extends HTMLElement{static get observedAttributes(){return['href','composed','get','set','get-props','set-props',sh]}absolute(a,b){var c=a.split('/'),d=b.split('/');return c.pop(),d.forEach(f=>{switch(f){case'.':return;case'..':c.pop();break;default:c.push(f);}}),c.join('/')}append(a,b){const f=a.getElementById(b),g=document.importNode(f.content,!0);if(this._stamp_href){this.qsa('['+(p+'initial-child')+']').forEach(j=>{j.style.display='none'});const h=g.children;for(let j=0,k=h.length;j<k;j++){const l=h[j];l.setAttribute(hs,this._href)}}this.appendChild(g)}qsa(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}loadHref(){if(this._once=!0,!!this._href){let needToProcessFurther=!0;if(this._stamp_href&&this.qsa(':scope > ['+hs+']').forEach(a=>{a.getAttribute(hs)===this._href?(needToProcessFurther=!1,a.style.display=a[os]):(a[os]=a.style.display,a.style.display='none')}),!!needToProcessFurther){const splitHref=this._href.split('#');if(!(2>splitHref.length)){const url=splitHref[0],id=splitHref[1];if(0===url.length)return void this.append(document,id,null,url);const isAbsTests=['https://','/','//','http://'];let isAbsolute=!1;for(let a=0,b=isAbsTests.length;a<b;a++)if(url.startsWith(isAbsTests[a])){this._absUrl=url,isAbsolute=!0;break}isAbsolute||(this._absUrl=this.absolute(location.href,url));const absUrl=this._absUrl;let shadowDOM=CC._shadowDoms[absUrl];if(shadowDOM)switch(typeof shadowDOM){case'boolean':const a=CC._shDmSub,b=c=>{this.append(c,id,absUrl,url)};a[absUrl]?a[absUrl].push(b):a[absUrl]=[b];break;case'object':this.append(shadowDOM,id,absUrl,url);}else CC._shadowDoms[absUrl]=!0,fetch(absUrl).then(resp=>{resp.text().then(txt=>{const container=document.createElement('div');container.style.display='none',document.body.appendChild(container);const shadowRoot=container.attachShadow({mode:'open'});CC._shadowDoms[absUrl]=shadowRoot;const parser=new DOMParser;let docFrag=parser.parseFromString(txt,'text/html');docFrag.head&&this.qsa('meta[name="preprocessor"]',docFrag).forEach(metaProcessorTag=>{const metaProcessorIdentifier=metaProcessorTag.getAttribute('content'),metaProcessor=eval(metaProcessorIdentifier);docFrag=metaProcessor(docFrag,this)}),shadowRoot.appendChild(docFrag.body),this.append(shadowRoot,id,absUrl,url);const subscribers=CC._shDmSub[absUrl];subscribers&&(subscribers.forEach(a=>a(shadowRoot)),delete CC._shDmSub[absUrl])})})}}}}c2(){if(this._set){const a=this._set.split(';');a.forEach(b=>{const c=b.split(':'),d=c[0],f=c[1];this.addEventListener(cg+d,g=>{g.detail.value=f;const h=this.getAttribute(d+'-props');if(h){const j=h.split(';');j.forEach(k=>{const l=k.split(':'),m=l[0],n=l[1],o=m.split('.');let q=g.srcElement;const r=o.length;for(let t=0;t<r-1;t++)q=q[o[t]];const s=o[r-1];switch(typeof q[s]){case'string':q[s]=n;break;default:throw'not implemented yet';}})}})})}if(this._set_props){const a=this._set_props.split(';');a.forEach(b=>{this.addEventListener(cgp+b,c=>{const d=c.srcElement.nextElementSibling;d[b]=this[b],this.pcs||(this.pcs={}),this.pcs[b]||(this.pcs[b]=[]),this.pcs[b].push(d);Object.defineProperty(this,b,{enumerable:!0,configurable:!0,set:function(g){this.pcs[b].forEach(h=>h[b]=g)}})})})}if(this._get){const a=new CustomEvent(cg+this._get,{detail:{},bubbles:!0,composed:this._composed});this.dispatchEvent(a),this.innerHTML=a.detail.value}if(this._get_props){const a=this._get_props.split(';');a.forEach(b=>{const c=new CustomEvent(cgp+b,{bubbles:!0,composed:this._composed});this.dispatchEvent(c)})}this.loadHref()}connectedCallback(){setTimeout(()=>{this.c2()},1)}attributeChangedCallback(a,b,c){'href'===a?(this._href=c,this._once&&this.loadHref()):a===sh?this._stamp_href=void 0!==c:'composed'===a?this._composed=null!==c:this['_'+a.replace('-','_')]=c}set href(a){this.setAttribute('href',a)}get href(){return this._href}}CC._shadowDoms={},CC._shDmSub={};customElements.define('c-c',CC),customElements.define('carbon-copy',class extends CC{})})();